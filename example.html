<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bj-pass Authentication Widget - Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .widget-container {
            margin: 20px 0;
            padding: 20px;
            border: 2px dashed #0066cc;
            border-radius: 8px;
            text-align: center;
        }
        .code-block {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .info {
            color: #0066cc;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üîê bj-pass Authentication Widget</h1>
    <p>D√©monstration du widget d'authentification OAuth 2.0/OpenID Connect</p>

    <div class="demo-section">
        <h2>üì¶ Installation via jsDelivr CDN</h2>
        <div class="code-block">
&lt;script src="https://cdn.jsdelivr.net/npm/bj-pass-auth-widget@2.0.0/dist/bj-pass-auth-widget.min.js"&gt;&lt;/script&gt;
        </div>
    </div>

    <div class="demo-section">
        <h2>üöÄ Utilisation basique</h2>
        <div class="widget-container" id="basic-widget"></div>
        <div class="code-block">
const widget = new BjPassAuthWidget({
    clientId: 'demo-client-id',
    debug: true,
    onSuccess: (tokens) => {
        console.log('‚úÖ Authentification r√©ussie !', tokens);
    },
    onError: (error) => {
        console.error('‚ùå Erreur:', error);
    }
});
        </div>
    </div>

    <div class="demo-section">
        <h2>üé® Configuration personnalis√©e</h2>
        <div class="widget-container" id="custom-widget"></div>
        <div class="code-block">
const customWidget = new BjPassAuthWidget({
    clientId: 'demo-client-id',
    environment: 'test',
    ui: {
        language: 'fr',
        primaryColor: '#4f46e5',
        theme: 'modern'
    },
    debug: true,
    onSuccess: (tokens) => {
        console.log('‚úÖ Custom widget - Authentification r√©ussie !', tokens);
    }
});
        </div>
    </div>

    <div class="demo-section">
        <h2>‚ö° Auto-initialisation</h2>
        <div class="widget-container">
            <div id="auto-widget" 
                 data-bj-pass-widget 
                 data-bj-pass-config='{"clientId": "demo-client-id", "debug": true, "ui": {"primaryColor": "#dc3545"}}'>
            </div>
        </div>
        <div class="code-block">
&lt;div id="auto-widget" 
     data-bj-pass-widget 
     data-bj-pass-config='{"clientId": "demo-client-id", "debug": true}'&gt;
&lt;/div&gt;
        </div>
    </div>

    <div class="demo-section">
        <h2>üìä √âtat du widget</h2>
        <div id="widget-status">
            <p><span class="info">√âtat:</span> <span id="auth-status">Non connect√©</span></p>
            <p><span class="info">Tokens:</span> <span id="tokens-display">Aucun</span></p>
        </div>
        <button onclick="checkStatus()">V√©rifier l'√©tat</button>
        <button onclick="destroyWidget()">D√©truire le widget</button>
    </div>

    <!-- Chargement du widget depuis jsDelivr -->
    <script src="https://cdn.jsdelivr.net/npm/bj-pass-auth-widget@2.0.0/dist/bj-pass-auth-widget.min.js"></script>
    
    <script>
        // Widget basique
        const widget = new BjPassAuthWidget({
            clientId: 'demo-client-id',
            debug: true,
            onSuccess: (tokens) => {
                console.log('‚úÖ Authentification r√©ussie !', tokens);
                updateStatus('Connect√©', JSON.stringify(tokens, null, 2));
            },
            onError: (error) => {
                console.error('‚ùå Erreur:', error);
                updateStatus('Erreur', error.message);
            }
        });

        // Widget personnalis√©
        const customWidget = new BjPassAuthWidget({
            clientId: 'demo-client-id',
            environment: 'test',
            ui: {
                container: '#custom-widget',
                language: 'fr',
                primaryColor: '#4f46e5',
                theme: 'modern'
            },
            debug: true,
            onSuccess: (tokens) => {
                console.log('‚úÖ Custom widget - Authentification r√©ussie !', tokens);
                updateStatus('Connect√© (Custom)', JSON.stringify(tokens, null, 2));
            },
            onError: (error) => {
                console.error('‚ùå Custom widget - Erreur:', error);
                updateStatus('Erreur (Custom)', error.message);
            }
        });

        // Fonctions utilitaires
        function updateStatus(status, tokens) {
            document.getElementById('auth-status').textContent = status;
            document.getElementById('tokens-display').textContent = tokens;
            
            if (status.includes('Connect√©')) {
                document.getElementById('auth-status').className = 'success';
            } else if (status.includes('Erreur')) {
                document.getElementById('auth-status').className = 'error';
            }
        }

        function checkStatus() {
            const isAuth = widget.isAuthenticated();
            const tokens = widget.getTokens();
            
            updateStatus(
                isAuth ? 'Connect√©' : 'Non connect√©',
                tokens ? JSON.stringify(tokens, null, 2) : 'Aucun'
            );
        }

        function destroyWidget() {
            widget.destroy();
            updateStatus('Widget d√©truit', 'Aucun');
        }

        // Log de d√©marrage
        console.log('üöÄ bj-pass Widget Demo charg√© !');
        console.log('üìñ Documentation: https://yowedjamal.gitbook.io/bj-pass');
        console.log('üì¶ NPM: https://www.npmjs.com/package/bj-pass-auth-widget');
        console.log('üåê CDN: https://cdn.jsdelivr.net/npm/bj-pass-auth-widget');
    </script>
</body>
</html> 